{"level":"ERROR","operation":"Falha na transação: create-test-state","message":"error: Environment variable not found: DATABASE_URL.\n  -->  schema.prisma:20\n   | \n19 |   provider = \"postgresql\"\n20 |   url      = env(\"DATABASE_URL\")\n   | \n\nValidation Error Count: 1","timestamp":"2026-02-18T16:33:39.901Z"}
{"level":"ERROR","operation":"Falha nos testes de seed","message":"error: Environment variable not found: DATABASE_URL.\n  -->  schema.prisma:20\n   | \n19 |   provider = \"postgresql\"\n20 |   url      = env(\"DATABASE_URL\")\n   | \n\nValidation Error Count: 1","stack":"PrismaClientInitializationError: error: Environment variable not found: DATABASE_URL.\n  -->  schema.prisma:20\n   | \n19 |   provider = \"postgresql\"\n20 |   url      = env(\"DATABASE_URL\")\n   | \n\nValidation Error Count: 1\n    at t (/app/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at _r.transaction (/app/node_modules/@prisma/client/runtime/library.js:111:11891)\n    at Proxy._transactionWithCallback (/app/node_modules/@prisma/client/runtime/library.js:130:7924)\n    at TransactionManager.executeInTransaction (/app/scripts/transaction-manager.ts:14:28)\n    at /app/scripts/seed-data-extended-v3.test.ts:31:33\n    at file:///app/node_modules/@vitest/runner/dist/index.js:915:20","timestamp":"2026-02-18T16:33:39.907Z"}
{"level":"INFO","operation":"Iniciando validação do seed","timestamp":"2026-02-18T16:33:39.910Z"}
{"level":"ERROR","operation":"Erro durante validação do seed","message":"\nInvalid `prisma.user.count()` invocation in\n/app/scripts/seed-validator.ts:53:38\n\n  50 \n  51 private async getAllCounts() {\n  52     return {\n→ 53         users: await prisma.user.count(\nerror: Environment variable not found: DATABASE_URL.\n  -->  schema.prisma:20\n   | \n19 |   provider = \"postgresql\"\n20 |   url      = env(\"DATABASE_URL\")\n   | \n\nValidation Error Count: 1","stack":"PrismaClientInitializationError: \nInvalid `prisma.user.count()` invocation in\n/app/scripts/seed-validator.ts:53:38\n\n  50 \n  51 private async getAllCounts() {\n  52     return {\n→ 53         users: await prisma.user.count(\nerror: Environment variable not found: DATABASE_URL.\n  -->  schema.prisma:20\n   | \n19 |   provider = \"postgresql\"\n20 |   url      = env(\"DATABASE_URL\")\n   | \n\nValidation Error Count: 1\n    at $n.handleRequestError (/app/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/app/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/app/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at auditMiddleware (/app/src/lib/audit-middleware.ts:51:18)\n    at Array.$allOperations (/app/src/lib/prisma.ts:69:24)\n    at l (/app/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at SeedValidator.getAllCounts (/app/scripts/seed-validator.ts:53:20)\n    at SeedValidator.validateAll (/app/scripts/seed-validator.ts:24:29)\n    at /app/scripts/seed-data-extended-v3.test.ts:77:25\n    at file:///app/node_modules/@vitest/runner/dist/index.js:915:20","timestamp":"2026-02-18T16:33:39.929Z"}
