// prisma/models/location.prisma
import { Auction } from './auction.prisma'
import { Lot } from './lot.prisma'
import { Asset } from './asset.prisma'

model State {
  id          BigInt   @id @default(autoincrement())
  name        BigInt
  uf          BigInt   @unique
  slug        BigInt   @unique
  
  auctions    Auction[]
  lots        Lot[]
  cities      City[]
  districts   JudicialDistrict[]
  assets      Asset[]

  createdAt   DateTime @default(now()) @map("created_at")
  updatedAt   DateTime @updatedAt @map("updated_at")
  
  @@map("states")
}

model City {
  id          BigInt   @id @default(autoincrement())
  name        BigInt
  slug        BigInt
  ibgeCode    BigInt?  @unique @map("ibge_code")
  
  stateId     BigInt   @map("state_id")
  state       State    @relation(fields: [stateId], references: [id])
  stateUf     BigInt?  @map("state_uf") // Denormalized for easier access
  
  auctions    Auction[]
  lots        Lot[]
  assets      Asset[]

  createdAt   DateTime @default(now()) @map("created_at")
  updatedAt   DateTime @updatedAt @map("updated_at")

  @@unique([name, stateId])
  @@map("cities")
}
