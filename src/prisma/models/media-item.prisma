// prisma/models/media-item.prisma
import { User } from './user.prisma'
import { JudicialProcess } from './judicial-process.prisma'
import { Asset } from './asset.prisma'
import { AssetMedia } from './asset-media.prisma'

model MediaItem {
  id                      BigInt   @id @default(autoincrement())
  fileName                BigInt
  mimeType                BigInt
  sizeBytes               Int
  storagePath             BigInt // Caminho no bucket de armazenamento
  urlOriginal             BigInt   @unique
  urlThumbnail            BigInt?
  
  title                   BigInt?
  altText                 BigInt?
  caption                 BigInt?
  description             BigInt?
  dataAiHint              BigInt?
  
  uploadedByUserId        BigInt? @map("uploaded_by_user_id")
  uploadedByUser          User?   @relation(fields: [uploadedByUserId], references: [id])
  
  judicialProcessId       BigInt? @map("judicial_process_id")
  judicialProcess         JudicialProcess? @relation(fields: [judicialProcessId], references: [id])

  // Back-relations para Asset
  imageForAssets          Asset[]  @relation("AssetImage")
  galleryForAssets        AssetMedia[] @relation("AssetGallery")

  createdAt               DateTime @default(now()) @map("created_at")
  updatedAt               DateTime @updatedAt @map("updated_at")

  @@map("media_items")
}
