// prisma/models/media-item.prisma
import { User } from './user.prisma'
import { JudicialProcess } from './judicial-process.prisma'
import { Asset } from './asset.prisma'
import { AssetMedia } from './asset-media.prisma'

model MediaItem {
  id                      String   @id @default(cuid())
  fileName                String
  mimeType                String
  sizeBytes               Int
  storagePath             String // Caminho no bucket de armazenamento
  urlOriginal             String   @unique
  urlThumbnail            String?
  
  title                   String?
  altText                 String?
  caption                 String?
  description             String?
  dataAiHint              String?
  
  uploadedByUserId        String? @map("uploaded_by_user_id")
  uploadedByUser          User?   @relation(fields: [uploadedByUserId], references: [id])
  
  judicialProcessId       String? @map("judicial_process_id")
  judicialProcess         JudicialProcess? @relation(fields: [judicialProcessId], references: [id])

  // Back-relations para Asset
  imageForAssets          Asset[]  @relation("AssetImage")
  galleryForAssets        AssetMedia[] @relation("AssetGallery")

  createdAt               DateTime @default(now()) @map("created_at")
  updatedAt               DateTime @updatedAt @map("updated_at")

  @@map("media_items")
}
