// prisma/models/PlatformSettings.prisma
/**
 * @fileoverview Define as configurações globais da plataforma.
 */
import { StorageProviderType, SearchPaginationType, CrudFormMode } from './enums.prisma';

model PlatformSettings {
  id                      String                   @id @default("global")
  tenantId                String                   @unique
  tenant                  Tenant                   @relation(fields: [tenantId], references: [id])
  siteTitle               String                   @default("BidExpert")
  siteTagline             String?
  logoUrl                 String?
  faviconUrl              String?
  galleryImageBasePath    String                   @default("/uploads/media/")
  storageProvider         StorageProviderType      @default(local)
  firebaseStorageBucket   String?
  activeThemeName         String?
  searchPaginationType    SearchPaginationType     @default(loadMore)
  searchItemsPerPage      Int                      @default(12)
  searchLoadMoreCount     Int                      @default(12)
  showCountdownOnLotDetail Boolean                  @default(true)
  showCountdownOnCards    Boolean                  @default(true)
  showRelatedLotsOnLotDetail Boolean               @default(true)
  relatedLotsCount        Int                      @default(4)
  defaultListItemsPerPage Int                      @default(10)
  defaultUrgencyTimerHours Int?
  isSetupComplete         Boolean                  @default(false)
  crudFormMode            CrudFormMode             @default(modal) // Novo campo

  themes                  ThemeSettings[]
  platformPublicIdMasks   IdMasks[]
  mapSettings             MapSettings[]
  biddingSettings         BiddingSettings[]
  paymentGatewaySettings  PaymentGatewaySettings[]
  notificationSettings    NotificationSettings[]
  mentalTriggerSettings   MentalTriggerSettings[]
  sectionBadgeVisibility  SectionBadgeVisibility[]
  variableIncrementTable  VariableIncrementRule[]

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model ThemeSettings {
  id               String           @id @default(cuid())
  platformSettings PlatformSettings @relation(fields: [platformSettingsId], references: [id])
  platformSettingsId String
  name             String           @unique
  colors           Json
}

model IdMasks {
  id                 String           @id @default(cuid())
  platformSettings   PlatformSettings @relation(fields: [platformSettingsId], references: [id])
  platformSettingsId String
  auctionCodeMask    String?
  lotCodeMask        String?
  sellerCodeMask     String?
  auctioneerCodeMask String?
  userCodeMask       String?
  assetCodeMask      String?
  categoryCodeMask   String?
  subcategoryCodeMask String?
}
