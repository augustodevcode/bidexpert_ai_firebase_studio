model Auction {
  id                      BigInt    @id @default(autoincrement())
  publicId                String    @unique @default(cuid())
  title                   String
  slug                    String    @unique
  description             String?   @db.Text
  status                  String    @default("EM_PREPARACAO")
  auctionDate             DateTime  @default(now())
  endDate                 DateTime?
  visits                  Int       @default(0)
  totalHabilitatedUsers   Int       @default(0)
  isFeaturedOnMarketplace Boolean   @default(false)
  additionalTriggers      String[]
  dataAiHint              String?

  imageUrl                String?
  imageMediaId            String? // Pode ser 'INHERIT' ou um ID de MediaItem
  documentsUrl            String?
  evaluationReportUrl     String?
  auctionCertificateUrl   String?
  
  // Method & Participation
  auctionType             String    @default("EXTRAJUDICIAL")
  auctionMethod           String    @default("STANDARD")
  participation           String    @default("ONLINE")
  onlineUrl               String?

  // Location
  street       String?
  number       String?
  complement   String?
  neighborhood String?
  zipCode      String?
  latitude     Decimal? @db.Decimal(9, 6)
  longitude    Decimal? @db.Decimal(9, 6)
  
  // Financial (for Dutch auctions)
  initialOffer            Decimal? @db.Decimal(12, 2)
  estimatedRevenue        Decimal? @db.Decimal(12, 2)
  achievedRevenue         Decimal? @db.Decimal(12, 2)
  decrementAmount         Decimal? @db.Decimal(12, 2)
  decrementIntervalSeconds Int?
  floorPrice              Decimal? @db.Decimal(12, 2)

  // Bidding rules
  automaticBiddingEnabled Boolean @default(false)
  allowInstallmentBids    Boolean @default(true)
  silentBiddingEnabled    Boolean @default(false)
  allowMultipleBidsPerUser Boolean @default(true)
  softCloseEnabled        Boolean @default(false)
  softCloseMinutes        Int?

  // Relist Settings (future use)
  autoRelistSettings Json?

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  // Relations
  tenantId    BigInt
  tenant      Tenant      @relation(fields: [tenantId], references: [id])
  auctioneerId BigInt?
  auctioneer  Auctioneer? @relation(fields: [auctioneerId], references: [id])
  sellerId    BigInt?
  seller      Seller?     @relation(fields: [sellerId], references: [id])
  categoryId  BigInt?
  category    LotCategory? @relation(fields: [categoryId], references: [id])
  cityId      BigInt?
  city        City?       @relation(fields: [cityId], references: [id])
  stateId     BigInt?
  state       State?      @relation(fields: [stateId], references: [id])
  judicialProcessId BigInt?
  judicialProcess JudicialProcess? @relation(fields: [judicialProcessId], references: [id])

  lots   Lot[]
  bids   Bid[]
  stages AuctionStage[]
  habilitations AuctionHabilitation[]
}
