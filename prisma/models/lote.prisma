
model Lot {
  id                      String    @id @default(cuid())
  publicId                String?   @unique
  auction                 Auction   @relation(fields: [auctionId], references: [id], onDelete: Cascade)
  auctionId               String
  slug                    String?
  number                  String?
  title                   String
  description             String?   @db.Text
  price                   Decimal   @db.Decimal(15, 2)
  initialPrice            Decimal?  @db.Decimal(15, 2)
  secondInitialPrice      Decimal?  @db.Decimal(15, 2)
  bidIncrementStep        Decimal?  @db.Decimal(10, 2)
  status                  String    @default("EM_BREVE")
  bidsCount               Int?      @default(0)
  views                   Int?      @default(0)
  isFeatured              Boolean?  @default(false)
  isExclusive             Boolean?  @default(false)
  additionalTriggers      Json?
  imageUrl                String?
  imageMediaId            String?
  galleryImageUrls        Json?
  mediaItemIds            Json?
  type                    String
  category                LotCategory? @relation(fields: [categoryId], references: [id])
  categoryId              String?
  subcategory             Subcategory? @relation(fields: [subcategoryId], references: [id])
  subcategoryId           String?
  auctionName             String?
  seller                  Seller?      @relation(fields: [sellerId], references: [id])
  sellerId                String?
  sellerName              String?
  auctioneer              Auctioneer?  @relation(fields: [auctioneerId], references: [id])
  auctioneerId            String?
  city                    City?        @relation(fields: [cityId], references: [id])
  cityId                  String?
  state                   State?       @relation(fields: [stateId], references: [id])
  stateId                 String?
  cityName                String?
  stateUf                 String?
  latitude                Decimal?     @db.Decimal(10, 8)
  longitude               Decimal?     @db.Decimal(11, 8)
  mapAddress              String?
  mapEmbedUrl             String?      @db.VarChar(500)
  mapStaticImageUrl       String?
  endDate                 DateTime?
  auctionDate             DateTime?
  lotSpecificAuctionDate  DateTime?
  secondAuctionDate       DateTime?
  condition               String?
  dataAiHint              String?
  winner                  User?        @relation("LotWinner", fields: [winnerId], references: [id])
  winnerId                String?
  winningBidTermUrl       String?
  allowInstallmentBids    Boolean?     @default(false)
  bids                    Bid[]
  userMaxBids             UserLotMaxBid[]
  lotBens                 LotBens[]
  inheritedMediaFromBemId String?
  isRelisted              Boolean?  @default(false)
  relistCount             Int?      @default(0)
  originalLot             Lot?      @relation("RelistHistory", fields: [originalLotId], references: [id], onDelete: NoAction, onUpdate: NoAction)
  originalLotId           String?
  relistedLots            Lot[]     @relation("RelistHistory")
  reviews                 Review[]
  questions               LotQuestion[]
  installments            InstallmentPayment[] @relation("LotInstallments")
  stageDetails            LotStageDetails[]
  createdAt               DateTime  @default(now())
  updatedAt               DateTime  @updatedAt
  tenantId                String
  tenant                  Tenant    @relation(fields: [tenantId], references: [id])

  @@index([auctionId])
  @@index([categoryId])
  @@index([sellerId])
}
