// prisma/models/Auction.prisma
model Auction {
  id                        String                 @id @default(cuid())
  publicId                  String                 @unique
  slug                      String                 @unique
  title                     String
  description               String?                @db.Text
  status                    AuctionStatus          @default(RASCUNHO)
  auctionDate               DateTime               @default(now())
  endDate                   DateTime?
  visits                    Int                    @default(0)
  isFeaturedOnMarketplace   Boolean                @default(false)
  achievedRevenue           Decimal?               @db.Decimal(12, 2)
  initialOffer              Decimal?               @db.Decimal(12, 2)
  latitude                  Decimal?               @db.Decimal(10, 8)
  longitude                 Decimal?               @db.Decimal(11, 8)
  auctionType               AuctionType?
  participation             AuctionParticipation?
  auctionMethod             AuctionMethod?
  onlineUrl                 String?
  sellingBranch             String?
  automaticBiddingEnabled   Boolean                @default(false)
  allowInstallmentBids      Boolean                @default(true)
  silentBiddingEnabled      Boolean                @default(false)
  allowMultipleBidsPerUser  Boolean                @default(true)
  softCloseEnabled          Boolean?               @default(false)
  softCloseMinutes          Int?                   @default(2)
  estimatedRevenue          Decimal?               @db.Decimal(12, 2)
  totalHabilitatedUsers     Int?                   @default(0)
  documentsUrl              String?
  evaluationReportUrl       String?
  auctionCertificateUrl     String?
  additionalTriggers        Json?
  dataAiHint                String?

  createdAt                 DateTime               @default(now())
  updatedAt                 DateTime               @updatedAt

  lots                      Lot[]
  reviews                   Review[]
  questions                 LotQuestion[]
  habilitations             AuctionHabilitation[]

  auctioneerId              String?
  auctioneer                Auctioneer?            @relation(fields: [auctioneerId], references: [id], onDelete: SetNull)

  sellerId                  String?
  seller                    Seller?                @relation(fields: [sellerId], references: [id], onDelete: SetNull)

  categoryId                String?
  category                  LotCategory?           @relation(fields: [categoryId], references: [id], onDelete: SetNull)
  
  judicialProcessId         String?
  judicialProcess           JudicialProcess?       @relation(fields: [judicialProcessId], references: [id], onDelete: SetNull)

  courtId                   String?
  court                     Court?                 @relation(fields: [courtId], references: [id])

  districtId                String?
  district                  JudicialDistrict?      @relation(fields: [districtId], references: [id])

  branchId                  String?
  branch                    JudicialBranch?        @relation(fields: [branchId], references: [id])

  stateId                   String?
  state                     State?                 @relation(fields: [stateId], references: [id])

  cityId                    String?
  city                      City?                  @relation(fields: [cityId], references: [id])

  tenantId                  String
  tenant                    Tenant                 @relation(fields: [tenantId], references: [id])

  stages                    AuctionStage[]
}
