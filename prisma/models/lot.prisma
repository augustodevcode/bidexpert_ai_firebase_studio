
model Lot {
  id                           BigInt                  @id @default(autoincrement())
  publicId                     String                  @unique @default(cuid())
  codigo                       String                  @unique @default(cuid())
  number                       String?
  title                        String
  description                  String?                 @db.Text
  properties                   Json?
  status                       LotStatus               @default(EM_BREVE)
  price                        Decimal                 @db.Decimal(12, 2)
  initialPrice                 Decimal?                @db.Decimal(12, 2)
  secondInitialPrice           Decimal?                @db.Decimal(12, 2)
  bidIncrementStep             Decimal?                @db.Decimal(12, 2)
  evaluationValue              Decimal?                @db.Decimal(12, 2)
  discountPercentage           Float?
  startDate                    DateTime?
  endDate                      DateTime?
  views                        Int                     @default(0)
  isFeatured                   Boolean                 @default(false)
  isExclusive                  Boolean                 @default(false)
  slug                         String                  @unique
  hasKey                       Boolean                 @default(false)
  winningBidTermUrl            String?                 @db.VarChar(1024)
  bidsCount                    Int                     @default(0)
  dataAiHint                   String?
  mapAddress                   String?
  latitude                     Decimal?                @db.Decimal(10, 8)
  longitude                    Decimal?                @db.Decimal(11, 8)
  relistCount                  Int                     @default(0)
  isRelisted                   Boolean                 @default(false)
  tenantId                     BigInt
  tenant                       Tenant                  @relation(fields: [tenantId], references: [id])
  auctionId                    BigInt
  auction                      Auction                 @relation(fields: [auctionId], references: [id], onDelete: Cascade)
  type                         String // Substitu√≠do de LotCategory para String
  categoryId                   BigInt?
  category                     LotCategory?            @relation(fields: [categoryId], references: [id])
  subcategoryId                BigInt?
  subcategory                  Subcategory?            @relation(fields: [subcategoryId], references: [id])
  sellerId                     BigInt?
  seller                       Seller?                 @relation(fields: [sellerId], references: [id])
  auctioneerId                 BigInt?
  auctioneer                   Auctioneer?             @relation(fields: [auctioneerId], references: [id])
  winnerId                     BigInt?
  winner                       User?                   @relation("LotsWon", fields: [winnerId], references: [id])
  cityId                       BigInt?
  city                         City?                   @relation(fields: [cityId], references: [id])
  stateId                      BigInt?
  state                        State?                  @relation(fields: [stateId], references: [id])
  originalLotId                BigInt?
  originalLot                  Lot?                    @relation("RelistedFrom", fields: [originalLotId], references: [id], onDelete: NoAction, onUpdate: NoAction)
  relistedLots                 Lot[]                   @relation("RelistedFrom")
  assets                       AssetsOnLots[]
  bids                         Bid[]
  userWins                     UserWin[]
  maxBids                      UserLotMaxBid[]
  reviews                      Review[]
  questions                    LotQuestion[]
  stagePrices                  LotStagePrice[]
  installmentPayments          InstallmentPayment[]
  lotStageDetails              LotStageDetails[]
  inheritedMediaFromBemId      BigInt?
  createdAt                    DateTime                @default(now())
  updatedAt                    DateTime                @updatedAt

  @@index([auctionId])
  @@index([winnerId])
  @@index([status])
  @@index([originalLotId])
}
