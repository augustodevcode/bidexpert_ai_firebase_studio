// prisma/models/lot.prisma
model Lot {
  id                   Int       @id @default(autoincrement())
  publicId             String    @unique @default(uuid())
  slug                 String    @unique
  number               String?
  title                String
  description          String?   @db.Text
  properties           String?   @db.Text
  status               String    @default("EM_BREVE")
  price                Decimal   @db.Decimal(12, 2)
  initialPrice         Decimal?  @db.Decimal(12, 2)
  secondInitialPrice   Decimal?  @db-Decimal(12, 2)
  evaluationValue      Decimal?  @db.Decimal(12, 2)
  bidIncrementStep     Decimal?  @db.Decimal(12, 2)
  bidsCount            Int       @default(0)
  views                Int       @default(0)
  isFeatured           Boolean   @default(false)
  isExclusive          Boolean   @default(false)
  allowInstallmentBids Boolean   @default(false)
  additionalTriggers   String[]
  endDate              DateTime?
  createdAt            DateTime  @default(now())
  updatedAt            DateTime  @updatedAt
  auction              Auction   @relation(fields: [auctionId], references: [id], onDelete: Cascade)
  auctionId            Int
  category             LotCategory? @relation(fields: [categoryId], references: [id])
  categoryId           Int?
  subcategory          Subcategory? @relation(fields: [subcategoryId], references: [id])
  subcategoryId        Int?
  winner               User?      @relation("LotsWon", fields: [winnerId], references: [id])
  winnerId             Int?
  bids                 Bid[]
  reviews              Review[]
  questions            LotQuestion[]
  userMaxBids          UserLotMaxBid[]
  assets               AssetsOnLots[]
  inheritedMediaFromAssetId String?
  wins                 UserWin[]
  seller               Seller?      @relation(fields: [sellerId], references: [id])
  sellerId             Int?
  auctioneer           Auctioneer?  @relation(fields: [auctioneerId], references: [id])
  auctioneerId         Int?
  tenant               Tenant       @relation(fields: [tenantId], references: [id])
  tenantId             Int
  originalLot          Lot?         @relation("RelistedLot", fields: [originalLotId], references: [id], onDelete: NoAction, onUpdate: NoAction)
  originalLotId        Int?         @unique
  relistedLot          Lot?         @relation("RelistedLot")
  isRelisted           Boolean      @default(false)
  relistCount          Int          @default(0)
  winningBidTermUrl    String?
  imageUrl             String?
  imageMediaId         String?
  galleryImageUrls     String[]
  mediaItemIds         String[]
  dataAiHint           String?
  cityName             String?
  stateUf              String?
  mapAddress           String?
  latitude             Float?
  longitude            Float?
  city                 City?        @relation(fields: [cityId], references: [id])
  cityId               Int?
  state                State?       @relation(fields: [stateId], references: [id])
  stateId              Int?
  stageDetails         LotStageDetails[]
}
