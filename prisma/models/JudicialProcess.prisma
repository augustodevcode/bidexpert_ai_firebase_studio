// prisma/models/JudicialProcess.prisma
import { Court, JudicialDistrict, JudicialBranch, Seller, Auction } from './';
import { ProcessPartyType } from './enums.prisma';


model JudicialProcess {
  id            String          @id @default(cuid())
  publicId      String          @unique @default(cuid())
  processNumber String          @unique
  isElectronic  Boolean         @default(true)
  
  courtId       String?
  court         Court?          @relation(fields: [courtId], references: [id])
  
  districtId    String?
  district      JudicialDistrict? @relation(fields: [districtId], references: [id])
  
  branchId      String?
  branch        JudicialBranch? @relation(fields: [branchId], references: [id])
  
  sellerId      String?
  seller        Seller?         @relation(fields: [sellerId], references: [id])

  parties       JudicialParty[]
  assets        Asset[]
  auctions      Auction[]

  createdAt     DateTime        @default(now())
  updatedAt     DateTime        @updatedAt
  tenantId      String
  tenant        Tenant          @relation(fields: [tenantId], references: [id])

  @@index([processNumber])
  @@index([tenantId])
}

model JudicialParty {
  id              String            @id @default(cuid())
  processId       String
  process         JudicialProcess   @relation(fields: [processId], references: [id], onDelete: Cascade)
  name            String
  documentNumber  String?
  partyType       ProcessPartyType

  @@index([processId])
}
